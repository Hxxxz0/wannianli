# 智能万年历 - ESP32多功能显示器

## 🌟 主要功能

### 📱 网络配置
- **初始配置模式**：首次使用时自动创建`TV-PRO`热点
- **Web配置界面**：通过浏览器轻松配置所有功能
- **WiFi连接状态**：实时显示网络状态和信号强度

### ⏰ 时间与日期
- **时间显示**：支持12/24小时制切换
- **公历日期**：年/月/日完整显示
- **农历日期**：支持农历日期显示，可开启/关闭
- **自动校时**：通过NTP服务器自动同步时间

### 🌤️ 天气功能
- **实时天气**：显示当前温度、湿度、天气状况
- **天气图标**：根据天气状况自动切换显示图标
- **城市设置**：支持自定义城市天气查询
- **API配置**：支持配置心知天气API密钥

### 🎵 音频系统
- **音乐播放**：支持播放MP3格式音乐文件
- **闹钟铃声**：使用音乐作为闹钟提醒声
- **火警报警**：火警触发时自动播放警报声
- **音量调节**：支持通过Web界面调整音量（0.0-4.0）

### 🌡️ 环境监测
- **温湿度传感器**：内置DHT11实时监测室内环境
- **火焰传感器**：支持火焰检测和自动报警
- **邮件通知**：火警触发时自动发送警报邮件

### ⏰ 提醒功能
- **多组闹钟**：支持设置多个闹钟，可自定义标签
- **事件提醒**：支持重要日期提醒（生日、纪念日等）
- **提前通知**：支持事件提前一天提醒

### 📺 显示界面
- **多页面设计**：
  1. 主页面：时间、日期、天气概览
  2. 天气页面：详细天气信息
  3. 闹钟页面：闹钟列表和状态
  4. 事件页面：待办事项和重要日期
  5. 时间详情页：精确时间显示
  6. 农历页面：详细农历信息
  7. 网络信息页：设备状态和网络信息
  8. 火警警报页：火警触发时显示
- **自动轮转**：支持页面自动切换，间隔可调
- **按键控制**：支持手动切换页面

## 🔧 使用指南

### 初始设置
1. **首次启动**
   - 设备自动创建`TV-PRO`热点
   - 连接热点后访问`http://192.168.4.1`进行配置
   - 设置WiFi信息和基本参数

2. **联网后配置**
   - 设备成功连接WiFi后可通过IP地址访问
   - 在网络信息页面（按右键4次）查看IP
   - 访问`http://[设备IP]`进行详细设置

### 功能设置
1. **显示设置**
   - 时间格式：12/24小时制切换
   - 农历显示：开启/关闭农历显示
   - 页面轮转：设置自动切换间隔

2. **闹钟设置**
   - 添加/编辑闹钟时间和标签
   - 启用/禁用各闹钟
   - 闹钟触发时播放音乐提醒

3. **事件提醒**
   - 设置重要日期和提醒方式
   - 支持全天事件和定时事件
   - 可选择是否提前提醒

4. **音频设置**
   - 上传自定义音乐文件
   - 调整音量大小
   - 测试音频播放

### 按键操作
- **左键**：上一页
- **右键**：下一页
- **中键短按**：返回主页
- **中键长按**：进入配置模式

## 📝 注意事项

1. **文件系统**
   - `/compressed_smaller.mp3`：闹钟和背景音乐文件
   - `/beep_burst.mp3`：警报音效文件
   - 配置文件自动保存在SPIFFS中

2. **安全功能**
   - 火警检测阈值可调
   - 支持邮件通知功能
   - 自动保存所有配置

3. **网络要求**
   - 需要稳定的WiFi连接
   - 支持自动重连功能
   - 断网时保持基本功能运行

4. **其他说明**
   - 部分设置需要重启生效
   - 建议定期检查传感器状态
   - 确保存储空间充足

## 🔄 更新记录

### 最新版本
- 优化音频系统，使用音乐替代蜂鸣声
- 添加火焰检测和报警功能
- 增加邮件通知系统
- 改进页面切换逻辑
- 优化传感器数据采集 